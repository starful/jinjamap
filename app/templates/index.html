<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1SWMP4KC55"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-1SWMP4KC55');
    </script>

    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8780435268193938" crossorigin="anonymous"></script> -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도쿄 신사 지도 (Tokyo Shrine Map) - JinjaMap</title>
    <meta name="description" content="도쿄 여행 필수 코스! 재물, 사랑, 건강 등 소원별 신사 찾기.">
    
    <link rel="canonical" href="https://jinjamap.com/">

    <!-- [최적화] 외부 도메인 사전 연결 (여기를 추가하세요!) -->
    <!-- 1. Google Maps 서버 미리 연결 (LCP 개선) -->
    <link rel="preconnect" href="https://maps.googleapis.com">
    <link rel="preconnect" href="https://maps.gstatic.com">
    
    <!-- 2. 하테나 블로그 이미지 서버 미리 연결 (스크린샷 해결책, 300ms 절약) -->
    <link rel="preconnect" href="https://cdn-ak.f.st-hatena.com">
    
    <!-- 3. Google Fonts (이미 사용 중이라면) & Adsense DNS 조회 -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
    <!-- [최적화 끝] -->
    
    <link rel="icon" href="/static/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/static/css/style.css">

    <!-- 폭죽 효과 -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js" defer></script>

</head>
<body>
    <div class="container">
        <header>
            <h1>
                <picture>
                    <source srcset="/static/images/JinjaMapLogo_Horizontal.png" media="(max-width: 768px)">
                    <!-- [최적화] fetchpriority="high" 및 사이즈 명시로 LCP 개선 -->
                    <img src="/static/images/JinjaMapLogo_Vertical.png" 
                         alt="도쿄 신사 지도 JinjaMap 로고" 
                         class="logo-img"
                         fetchpriority="high"
                         width="650" height="325"
                         style="height: auto;">
                </picture>
            </h1>
            
            <p id="update-msg" class="update-message">데이터 로딩 중...</p>
            
            <div class="theme-filter-buttons">
                <button class="theme-button active" data-theme="all">전체 보기</button>
                <button class="theme-button" data-theme="wealth" data-tooltip="재물, 사업 번창">재물</button>
                <button class="theme-button" data-theme="love" data-tooltip="연애, 결혼, 인연">사랑</button>
                <button class="theme-button" data-theme="health" data-tooltip="건강, 치유">건강</button>
                <button class="theme-button" data-theme="study" data-tooltip="학업, 합격">학업</button>
                <button class="theme-button" data-theme="safety" data-tooltip="안전, 액운 방지">안전</button>
                <button class="theme-button" data-theme="success" data-tooltip="승진, 목표 달성">성공</button>
                <button class="theme-button" data-theme="history" data-tooltip="역사, 문화재">역사</button>
            </div>
        </header>
        
        <main>
            <section>
                <div id="map"></div>
                <article style="padding: 20px; color: #555; font-size: 0.95rem; line-height: 1.6; background: rgba(255,255,255,0.8);">
                    <h2>도쿄 신사 여행 가이드</h2>
                    <p>JinjaMap을 통해 도쿄 곳곳에 숨겨진 신사를 탐방해보세요. 여러분의 소원을 이루어줄 특별한 장소를 지도에서 쉽게 찾을 수 있습니다.</p>
                </article>
            </section>

            <section class="list-section">
                <h2 class="list-title">⛩️ 최신 신사 탐방기</h2>
                <!-- 자바스크립트로 카드가 생성되는 공간 -->
                <div id="shrine-list" class="shrine-grid"></div>
            </section>
        </main>

        <section style="padding: 40px 20px; background-color: #fff; border-top: 1px solid #eee; text-align: center;">
            <h2 style="margin-bottom: 15px;">JinjaMap은?</h2>
            <p style="color: #555;">도쿄 여행자들이 소원에 맞는 신사를 찾을 수 있도록 돕는 비영리 프로젝트입니다.</p>
        </section>

        <footer>
            <p>&copy; 2024 JinjaMap. All rights reserved.</p>
            <p>
                <a href="/privacy.html">개인정보처리방침</a> | 
                <a href="https://forms.gle/your-google-form-url" target="_blank">문의하기</a>
            </p>
        </footer>
    </div>

    <!-- 오미쿠지 버튼 및 모달 -->
    <button id="omikuji-btn" class="omikuji-floating-btn">🥠 오늘의 운세</button>

    <div id="omikuji-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="omikuji-step1">
                <h2>⛩️ 신사 오미쿠지</h2>
                <div class="omikuji-box">
                    <img src="/static/images/omikuji_box.png" id="shaking-box" style="width: 100px; margin: 20px auto; display:block;" alt="오미쿠지 통"> 
                </div>
                <button id="draw-btn" class="action-btn">운세 뽑기!</button>
            </div>
            <div id="omikuji-step2" style="display: none;">
                <h2 id="result-title" style="font-size: 2rem;"></h2>
                <p id="result-desc" style="font-size: 1.1rem; margin: 15px 0;"></p>
                <button id="go-map-btn" class="action-btn"></button>
            </div>
        </div>
    </div>

    <!-- [중요] 최적화된 JS 로드 -->
    <script src="/static/js/map.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDuXVPx8glg6BVdWvdxNoyRSsErkFR_pDk&callback=initMap&libraries=marker&v=beta&loading=async" async defer></script>
</body>
</html>